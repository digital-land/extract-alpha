{% extends "layouts/post.njk" %}

{% from "screenshots/macro.njk" import appScreenshots %}

{# Add scripts to head; preserve upstream head content #}
{% block head %}
  {{ super() }}
  {% if isProduction %}
    <!-- Privacy-friendly analytics by Plausible -->
    <script async src="https://plausible.io/js/pa-PY5FsA6QcLIz_lTqqfGBa.js"></script>
    <script>
    window.plausible=window.plausible||function(){(plausible.q=plausible.q||[]).push(arguments)},plausible.init=plausible.init||function(i){plausible.o=i||{}};
    plausible.init()
    </script>
  {% endif %}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      {{ appDocumentHeader({
        title: title | noOrphans,
        date: date,
        modified: modified,
        author: author,
        authors: authors,
        tags: tags
      }) }}
    </div>

    <div class="govuk-grid-column-three-quarters">
      {% call appProseScope() %}
        {% if image -%}
          <figure>
            <img src="{{ image.src }}" alt="{{ image.alt }}">
            {% if image.caption -%}
            <figcaption>{{ image.caption }}</figcaption>
            {% endif -%}
          </figure>
        {%- endif %}

        {{ content }}

        {% for collection in screenshots %}
          {{ appScreenshots(collection) }}
        {% else %}
          {{ appScreenshots(screenshots) if screenshots }}
        {% endfor %}
      {% endcall %}
    </div>

    {% if aside or related %}
      <div class="govuk-grid-column-one-quarter">
        {% include "layouts/shared/related.njk" %}
      </div>
    {% endif %}
  </div>
{% endblock %}
